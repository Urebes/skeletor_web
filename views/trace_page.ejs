<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/chart.css">
    <link rel="stylesheet" href="/css/trace_page.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <script type="text/javascript">
      // retrieving these value in here so that other js files can use it
      const files = <%- JSON.stringify(trace.files) %>;
      const queue = <%- JSON.stringify(trace.queue) %>;
      const id = "<%= trace.id %>";
      var getUrl = window.location;
      var baseUrl = getUrl .protocol + "//" + getUrl.host
      //var socket = io(baseUrl);
    </script>
    <script src="/js/trace_page.js" "trace_id"=id></script>
    <script src="/js/main.js"></script>
  </head>

  <body>
    <%- include("shared/navbar", { login: userId }) %>
    <div class="container">
      <button class="test_anime">test</button>
      <div class="row" id="new_data_alert" style="display: none;">
        <div class="alert alert-success">
          <strong>Success!</strong> Metric Calculation completed. <a class="reload_button">Click here</a> to refresh page. 
        </div>
      </div>
     <div class="row">
       <h1><%= trace.name %></h1>
       <div class="col-xs-12">
         <div class="panel panel-default">
           <div class="panel-body">
             <span class="glyphicon glyphicon-cloud-upload"></span>
             <div class="progress">
               <div class="progress-bar" id="upload-bar" style="background-color: green;" role="progressbar">
               </div>
             </div>
           </div>
         </div>
       </div>
     </div>
     <div class="row">
       <form ref='uploadForm'
         id='uploadForm'
         encType="multipart/form-data">
           <input type="file"  class="input-file" multiple="multiple" />
           <button type="submit" class="upload-btn">Submit</button>
       </form>
    </div>
    <div class="progress position-relative metric-progress-container">
        <div class="progress-bar" role="progressbar" id="metric-bar" style="height: 50px; text-align: center;" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
        <small class="justify-content-center d-flex position-absolute w-100"></small>
    </div>
    <div class="row"><h2 id="loading"></h2></div>
      <div class="row" id="chart-container">
        <div class="col-xs-12">
          <div class="row" id="chart-main"><svg id="svg1" width="1100" height="600"></svg></div>
          <div class="row">
            <select id="add_metric_value"></select>
            <button id="add_metric">Add Metric</button>
          </div>
          <div id="selected_metrics"></div>
        </div>
      </div>
      <div class="row"><h3 id="no-data-message"></h3></div>
    </div>
   </div>
   <script src="/js/chart.js"></script>
 </body>

</html>